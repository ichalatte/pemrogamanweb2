<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stok Bahan Ajar</title>
  <link rel="stylesheet" href="css/stock.css">
  <script src="https://kit.fontawesome.com/a2e0adf1f2.js" crossorigin="anonymous"></script>
</head>
<body>
<div id="app">  <!-- Vue root -->

  <div id="homeBtn" 
     style="display:inline-flex; align-items:center; gap:6px; 
            background-color:darkblue; color:white; 
            padding:8px 14px; border-radius:8px; 
            cursor:pointer; font-weight:500; 
            font-family:Arial, sans-serif; 
            box-shadow:0 2px 6px rgba(0,0,0,0.15); 
            transition:background 0.3s; margin-right:10px;">
  <span style="font-size:18px;">üè†</span>
  <span>Home</span>
</div>

<div id="logoutBtn" 
     style="display:inline-flex; align-items:center; gap:6px; 
            background-color:darkred; color:white; 
            padding:8px 14px; border-radius:8px; 
            cursor:pointer; font-weight:500; 
            font-family:Arial, sans-serif; 
            box-shadow:0 2px 6px rgba(0,0,0,0.15); 
            transition:background 0.3s;">
  <span style="font-size:18px;">üö™</span>
  <span>Logout</span>
</div>

  <h1>üìö Stok Bahan Ajar</h1>
    
<div class="filter-section">

  <div class="filter-item">
    <label>UT-Daerah</label>
    <select v-model="filterDaerah">
      <option value="">Semua</option>
      <option v-for="d in upbjjList" :key="d" :value="d">{{ d }}</option>
    </select>
  </div>

  <div class="filter-item" v-if="filterDaerah">
    <label>Kategori</label>
    <select v-model="filterKategori">
      <option value="">Semua</option>
      <option v-for="k in kategoriList" :key="k">{{ k }}</option>
    </select>
  </div>

  <div class="filter-item">
    <label>Status Stok</label>
    <select v-model="filterStock">
      <option value="">Semua</option>
      <option value="low">Menipis (qty < safety)</option>
      <option value="zero">Kosong (qty = 0)</option>
    </select>
  </div>

  <div class="filter-item">
    <label>Sort</label>
    <select v-model="sortBy">
      <option value="">Default</option>
      <option value="judul">Judul</option>
      <option value="stock">Stock</option>
      <option value="harga">Harga</option>
    </select>
  </div>

    <!-- Reset -->
  <button @click="resetFilter">Reset Filter</button>

</div>

  <!-- FORM TAMBAH -->
  <div class="form-container">
<input type="text" v-model="form.upbjj" placeholder="UPBJJ">
<input type="text" v-model="form.kode" placeholder="Kode Barang">
<input type="text" v-model="form.judul" placeholder="Nama Barang">
<input type="text" v-model="form.kategori" placeholder="Jenis Barang (BMP, Modul, dll)">
<input type="text" v-model="form.lokasiRak" placeholder="Lokasi Rak">
<input type="number" v-model="form.qty" placeholder="Qty">
<input type="number" v-model="form.safety" placeholder="Safety Stock">
<input type="text" v-model="form.catatanHTML" placeholder="Catatan (HTML opsional)">
<button @click="tambahData">Tambah Data</button>
  </div>

  <div id="container" class="container"></div>

  <div id="bahanAjarContainer" class="wrapper"></div>

    <!-- TABLE LIST -->
<table class="table-stock">
    <thead>
      <tr>
        <th>Kode Lokasi</th>
        <th>Kode Barang</th>
        <th>Nama Barang</th>
        <th>Jenis</th>
        <th>Edisi</th>
        <th>Stok</th>
        <th>Status</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="(item, index) in filteredItems" :key="item.kode">
 <!-- Kode Lokasi -->
  <td>{{ item.lokasiRak }}</td>

  <!-- Kode Barang -->
  <td>{{ item.kode }}</td>

  <!-- Nama Barang -->
  <td>{{ item.judul }}</td>

  <!-- Jenis -->
  <td>{{ item.kategori }}</td>

  <!-- Edisi -->
  <td>{{ item.edisi || '-' }}</td>

  <!-- Stok -->
  <td>{{ item.qty }}</td>

  <!-- Status -->
  <td>
    <span :style="{ 
      color: item.qty == 0 ? 'red' : item.qty < item.safety ? 'orange' : 'green' 
    }">
      {{ item.qty == 0 ? 'Kosong' : item.qty < item.safety ? 'Menipis' : 'Aman' }}
    </span>
  </td>
        <td>
          <button class="btn-edit" @click="mulaiEdit(index)">Edit</button>
          <button @click="hapusData(index)">Hapus</button>
        </td>
      </tr>
    </tbody>
  </table>

<div v-if="showEditModal" class="modal-overlay">
  <div class="modal-box">

    <div class="modal-header">Edit Data Stok</div>

    <label>Kode</label>
    <input v-model="editForm.kode" />

    <label>Judul</label>
    <input v-model="editForm.judul" />

    <label>Kategori</label>
    <input v-model="editForm.kategori" />

    <label>UPBJJ</label>
    <input v-model="editForm.upbjj" />

    <label>Lokasi Rak</label>
    <input v-model="editForm.lokasiRak" />

    <label>Qty</label>
    <input type="number" v-model="editForm.qty" />

    <label>Safety</label>
    <input type="number" v-model="editForm.safety" />

    <label>Catatan</label>
    <textarea v-model="editForm.catatanHTML"></textarea>

    <div class="modal-actions">
      <button class="modal-btn cancel" @click="batalEdit">Cancel</button>
      <button class="modal-btn save" @click="simpanEdit">Simpan</button>
    </div>

  </div>
</div>

</div> <!-- END APP -->

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="js/dataBahanAjar.js"></script>
<script src="js/stock.js"></script>

</body>
</html>
